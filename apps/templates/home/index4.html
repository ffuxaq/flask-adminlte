{% extends "layouts/base.html" %} {% block title %} Dashboard {% endblock %}

<!-- Element injected in the BODY element -->
{% block body_class %} sidebar-mini {% endblock body_class %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

<!-- Google Font: Source Sans Pro -->
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback"
/>
<!-- Font Awesome -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/fontawesome-free/css/all.min.css"
/>
<!-- Ionicons -->
<link
  rel="stylesheet"
  href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"
/>
<!-- Tempusdominus Bootstrap 4 -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css"
/>
<!-- iCheck -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/icheck-bootstrap/icheck-bootstrap.min.css"
/>
<!-- JQVMap -->
<link rel="stylesheet" href="/static/assets/plugins/jqvmap/jqvmap.min.css" />
<!-- Theme style -->
<link rel="stylesheet" href="/static/assets/css/adminlte.min.css" />
<!-- overlayScrollbars -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/overlayScrollbars/css/OverlayScrollbars.min.css"
/>
<!-- Daterange picker -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/daterangepicker/daterangepicker.css"
/>
<!-- summernote -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/summernote/summernote-bs4.min.css"
/>
<!-- DataTables -->
<link
  rel="stylesheet"
  href="/static/assets/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css"
/>
<link
  rel="stylesheet"
  href="/static/assets/plugins/datatables-responsive/css/responsive.bootstrap4.min.css"
/>

{% endblock stylesheets %} {% block content %}

<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <div class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-9">
          <h1 class="m-0 text-dark">CDC - Consolle di Cancelleria Dashboard</h1>
          <h2 class="m-0 text-dark">
            Panel 1 - Mensile Range: {{period_start}} - {{period_end}}
          </h2>
        </div>
        <!-- /.col -->
        <div class="col-sm-3">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item active">Dashboard v1</li>
          </ol>
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
    </div>
    <!-- /.container-fluid -->
  </div>
  <!-- /.content-header -->

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
      <!-- Small boxes (Stat box) -->

      <!-- ACCORDION 1 -->

      <div class="accordion" id="accordionExample">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h2 class="mb-0">
              <button
                class="btn btn-link btn-block text-left"
                type="button"
                data-toggle="collapse"
                data-target="#collapseOne"
                aria-expanded="true"
                aria-controls="collapseOne"
              >
                RAPPORTI/PESI MATERIA/MACROMATERIA SEMESTRALE
              </button>
            </h2>
          </div>

          <div
            id="collapseOne"
            class="collapse"
            aria-labelledby="headingOne"
            data-parent="#accordionExample"
          >
            <div class="card-body">
              <!-- Inizio Rettangoli definiti-->

              <div class="row">
                <div class="col-lg-3 col-6">
                  <!-- small box -->
                  <div class="small-box bg-info">
                    <div class="inner">
                      <h3>{{countProvvTot}}</h3>

                      <p>Numero di Materie nei Procedimenti</p>
                    </div>
                    <div class="icon">
                      <i class="ion ion-bag"></i>
                    </div>
                    <a href="#" class="small-box-footer"
                      >More info <i class="fas fa-arrow-circle-right"></i
                    ></a>
                  </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-3 col-6">
                  <!-- small box -->
                  <div class="small-box bg-success">
                    <div class="inner">
                      <h3>{{countSent}}</h3>

                      <p>Materia con maggior numero di fascicoli</p>
                    </div>
                    <div class="icon">
                      <i class="ion ion-stats-bars"></i>
                    </div>
                    <a href="#" class="small-box-footer"
                      >More info <i class="fas fa-arrow-circle-right"></i
                    ></a>
                  </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-3 col-6">
                  <!-- small box -->
                  <div class="small-box bg-warning">
                    <div class="inner">
                      <h3>{{countProvv}}</h3>

                      <p>Numero di Materie nei Procedimenti</p>
                    </div>
                    <div class="icon">
                      <i class="ion ion-person-add"></i>
                    </div>
                    <a href="#" class="small-box-footer"
                      >More info <i class="fas fa-arrow-circle-right"></i
                    ></a>
                  </div>
                </div>
                <!-- ./col -->
                <div class="col-lg-3 col-6">
                  <!-- small box -->
                  <div class="small-box bg-danger">
                    <div class="inner">
                      <h3>{{numeroGiudici}}</h3>

                      <p>XXXXXXX</p>
                    </div>
                    <div class="icon">
                      <i class="ion ion-pie-graph"></i>
                    </div>
                    <a href="#" class="small-box-footer"
                      >More info <i class="fas fa-arrow-circle-right"></i
                    ></a>
                  </div>
                </div>
                <!-- ./col -->
              </div>

              <!-- Fine Rettangoli definiti-->

              <!-- Inizio tabella Definiti -->

              <div class="container-fluid">
                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-header">
                        <h3 class="card-title">
                          Iscritti nell'ultimo semestre con calcolo dei pesi per materia e macromateria
                          (se definiti calcolo del tempo medio di definizione per materia?)
                        </h3>
                      </div>
                      <!-- /.card-header -->
                      <div class="card-body">
                        <table
                          id="table1"
                          class="table table-bordered table-hover"
                        >
                          <thead>
                            <tr>
                              <th>Materia</th>
                              <th>Peso Materia</th>
                              <th>Macro Materia</th>
                              <th>Peso MacroMateria</th>
                              <th>Tempio medio Definiz. per materia</th>
                            </tr>
                          </thead>
                          <tbody>
                            {% for res in semestrale["macromaterie"] -%}
                            {% for res2 in res["materie"] -%}
                            <tr>
                              <td>{{ res2["materia"] }}</td>
                              <td>{{ res2["pesomat"] }}%</td>
                              <td>{{ res["macromateria"] }}</td>
                              <td>{{ res["pesomacro"]}}%</td>
                              <td> XXX </td>
                            </tr>
                            {% endfor %}
                            {% endfor %}
                          </tbody>
                          <tfoot>
                            <tr>
                              <th>Codice Ufficio</th>
                              <th>Giudice</th>
                              <th>Registro</th>
                              <th>Sentenza/No Sentenza</th>
                              <th>Tempio medio Definiz. per materia</th>
                            </tr>
                          </tfoot>
                        </table>
                      </div>
                      <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                  </div>
                </div>
              </div>

              <!-- fine tabella Definiti-->              
            </div>
          </div>
        </div>
        <!-- FINE ACCORDION 1 -->
        <!-- ACCORDION 2 -->
        <div class="card">
          <div class="card-header" id="headingTwo">
            <h2 class="mb-0">
              <button
                class="btn btn-link btn-block text-left collapsed"
                type="button"
                data-toggle="collapse"
                data-target="#collapseTwo"
                aria-expanded="false"
                aria-controls="collapseTwo">
                RAPPORTI/PESI MATERIA/MACROMATERIA ANNUALE
              </button>
            </h2>
          <div id="collapseTwo"   class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
            <div class="card-body">

              <!-- Inizio tabella 2 -->

              <div class="container-fluid">
                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-header">
                        <h3 class="card-title">
                          Iscritti nell'ultimo anno con calcolo dei pesi per materia e macromateria
                          (se definiti calcolo del tempo medio di definizione per materia?)
                        </h3>
                      </div>
                      <!-- /.card-header -->
                      <div class="card-body">
                        <table
                          id="table2"
                          class="table table-bordered table-hover"
                        >
                        <thead>
                          <tr>
                            <th>Materia</th>
                            <th>Peso Materia</th>
                            <th>Macro Materia</th>
                            <th>Peso MacroMateria</th>
                            <th>Tempio medio Definiz. per materia</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for res in annuale["macromaterie"] -%}
                          {% for res2 in res["materie"] -%}
                          <tr>
                            <td>{{ res2["materia"] }}</td>
                            <td>{{ res2["pesomat"] }}%</td>
                            <td>{{ res["macromateria"] }}</td>
                            <td>{{ res["pesomacro"]}}%</td>
                            <td> XXX </td>
                          </tr>
                          {% endfor %}
                          {% endfor %}
                        </tbody>
                        <tfoot>
                          <tr>
                            <th>Codice Ufficio</th>
                            <th>Giudice</th>
                            <th>Registro</th>
                            <th>Sentenza/No Sentenza</th>
                            <th>Tempio medio Definiz. per materia</th>
                          </tr>
                        </tfoot>
                        </table>
                      </div>
                      <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                  </div>
                </div>
              </div>

              <!-- fine tabella 2-->               




            </div>
          </div>
        </div>

      </div>

      <!-- FINE ACCORDION 2 -->

    <!-- ACCORDION 3 -->
        <div class="card">
          <div class="card-header" id="headingThree">
            <h2 class="mb-0">
              <button
                class="btn btn-link btn-block text-left collapsed"
                type="button"
                data-toggle="collapse"
                data-target="#collapseThree"
                aria-expanded="false"
                aria-controls="collapseThree"
              >
              RAPPORTI/PESI MATERIA/MACROMATERIA BIENNALE
              </button>
            </h2>
          </div>
          <div
            id="collapseThree"
            class="collapse"
            aria-labelledby="headingThree"
            data-parent="#accordionExample"
          >
            <div class="card-body">
              
              <!-- Inizio tabella 2 -->

              <div class="container-fluid">
                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-header">
                        <h3 class="card-title">
                          Iscritti nell'ultimo biennio con calcolo dei pesi per materia e macromateria
                          (se definiti calcolo del tempo medio di definizione per materia?)
                        </h3>
                      </div>
                      <!-- /.card-header -->
                      <div class="card-body">
                        <table
                          id="table3"
                          class="table table-bordered table-hover"
                        >
                        <thead>
                          <tr>
                            <th>Materia</th>
                            <th>Peso Materia</th>
                            <th>Macro Materia</th>
                            <th>Peso MacroMateria</th>
                            <th>Tempio medio Definiz. per materia</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for res in biennale["macromaterie"] -%}
                          {% for res2 in res["materie"] -%}
                          <tr>
                            <td>{{ res2["materia"] }}</td>
                            <td>{{ res2["pesomat"] }}%</td>
                            <td>{{ res["macromateria"] }}</td>
                            <td>{{ res["pesomacro"]}}%</td>
                            <td> XXX </td>
                          </tr>
                          {% endfor %}
                          {% endfor %}
                        </tbody>
                        <tfoot>
                          <tr>
                            <th>Codice Ufficio</th>
                            <th>Giudice</th>
                            <th>Registro</th>
                            <th>Sentenza/No Sentenza</th>
                            <th>Tempio medio Definiz. per materia</th>
                          </tr>
                        </tfoot>
                        </table>
                      </div>
                      <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                  </div>
                </div>
              </div>

              <!-- fine tabella 2-->   
              

            </div>
          </div>
        </div>

      </div>

      <!-- fine ACCORDION 3 -->
      <!-- ACCORDION 4 -->
      <div class="card">
        <div class="card-header" id="headingFour">
          <h2 class="mb-0">
            <button
              class="btn btn-link btn-block text-left collapsed"
              type="button"
              data-toggle="collapse"
              data-target="#collapseFour"
              aria-expanded="false"
              aria-controls="collapseFour"
            >
            RAPPORTI/PESI MATERIA/MACROMATERIA QUADRIENNALE
            </button>
          </h2>
        </div>
        <div
          id="collapseFour"
          class="collapse"
          aria-labelledby="headingThree"
          data-parent="#accordionExample"
        >
          <div class="card-body">
           
            <!-- Inizio tabella 2 -->

            <div class="container-fluid">
              <div class="row">
                <div class="col-12">
                  <div class="card">
                    <div class="card-header">
                      <h3 class="card-title">
                        Iscritti nell'ultimo quadriennio con calcolo dei pesi per materia e macromateria
                          (se definiti calcolo del tempo medio di definizione per materia?)
                      </h3>
                    </div>
                    <!-- /.card-header -->
                    <div class="card-body">
                      <table
                        id="table4"
                        class="table table-bordered table-hover"
                      >
                      <thead>
                        <tr>
                          <th>Materia</th>
                          <th>Peso Materia</th>
                          <th>Macro Materia</th>
                          <th>Peso MacroMateria</th>
                          <th>Tempio medio Definiz. per materia</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for res in quadriennale["macromaterie"] -%}
                        {% for res2 in res["materie"] -%}
                        <tr>
                          <td>{{ res2["materia"] }}</td>
                          <td>{{ res2["pesomat"] }}%</td>
                          <td>{{ res["macromateria"] }}</td>
                          <td>{{ res["pesomacro"]}}%</td>
                          <td> XXX </td>
                        </tr>
                        {% endfor %}
                        {% endfor %}
                      </tbody>
                      <tfoot>
                        <tr>
                          <th>Codice Ufficio</th>
                          <th>Giudice</th>
                          <th>Registro</th>
                          <th>Sentenza/No Sentenza</th>
                          <th>Tempio medio Definiz. per materia</th>
                        </tr>
                      </tfoot>
                      </table>
                    </div>
                    <!-- /.card-body -->
                  </div>
                  <!-- /.card -->
                </div>
              </div>
            </div>

            
            <!-- fine tabella 2-->   
            



          </div>
        </div>
      </div>
      <!-- fine ACCORDION  -->

     

      

     

         

          
          <!-- /.card -->
        </section>
        <!-- /.Left col -->
        <!-- right col (We are only adding the ID to make the widgets sortable)-->
        <section class="col-lg-12 connectedSortable">

          <div class="container-fluid">
            <div class="row">
<div class="col-lg-12">
<div class="card">
<div class="card-header border-0">
  <div class="d-flex justify-content-between">
    <h3 class="card-title">Sales</h3>
    <a href="javascript:void(0);">View Report</a>
  </div>
</div>
<div class="card-body">
  <div class="d-flex">
    <p class="d-flex flex-column">
      <span class="text-bold text-lg">$18,230.00</span>
      <span>Sales Over Time</span>
    </p>
    <p class="ml-auto d-flex flex-column text-right">
      <span class="text-success">
        <i class="fas fa-arrow-up"></i> 33.1%
      </span>
      <span class="text-muted">Since last month</span>
    </p>
  </div>
  <!-- /.d-flex -->

  <div class="position-relative mb-4">
    <canvas id="materie-chart" height="200"></canvas>
  </div>

  <div class="d-flex flex-row justify-content-end">
    <span class="mr-2">
      <i class="fas fa-square text-primary"></i> This year
    </span>

    <span>
      <i class="fas fa-square text-gray"></i> Last year
    </span>
  </div>
</div>
</div>
</div>
</div>


          
          
        </section>
        <!-- right col -->
      </div>
      <!-- /.row (main row) -->
    </div>
    <!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<!-- jQuery -->
<script src="/static/assets/plugins/jquery/jquery.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="/static/assets/plugins/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge("uibutton", $.ui.button);
</script>
<!-- Bootstrap 4 -->
<script src="/static/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- ChartJS -->
<script src="/static/assets/plugins/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="/static/assets/plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="/static/assets/plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="/static/assets/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="/static/assets/plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="/static/assets/plugins/moment/moment.min.js"></script>
<script src="/static/assets/plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="/static/assets/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="/static/assets/plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="/static/assets/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->

<!-- AdminLTE for demo purposes -->
<script src="/static/assets/js/demo.js"></script>

<!-- DataTables -->
<script src="/static/assets/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/static/assets/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/static/assets/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="/static/assets/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<!-- AdminLTE App -->
<script src="/static/assets/js/adminlte.min.js"></script>
<!--<script src="/static/assets/js/pages/cdc_panel4.js"></script>-->
<!-- AdminLTE for demo purposes -->
<!-- page script -->
<script>
  $(function () {
    $materieQuadr = [] //contiene le materie
    $matPesiQuadr = [] // contiene i pesi delle materie
    $macroQuadr = [] //contiene le materie
    $macroPesiQuadr = [] // contiene i pesi delle materie

    {% for res in quadriennale["macromaterie"] -%}
    {% for res2 in res["materie"] -%}

         if ( $materieQuadr.indexOf('{{ res2["materia"] }}') < 0  ) {
            $materieQuadr.push('{{ res2["materia"] }}') // materia
            $matPesiQuadr.push({{ res2["pesomat"] }})
         }
          else {
            index = $materieQuadr.indexOf('{{ res2["materia"] }}')
            $matPesiQuadr[index] += {{ res2["pesomat"] }}
          }
    {% endfor -%}
    {% endfor -%}
    console.log($materieQuadr)
    console.log($matPesiQuadr)

    var ticksStyle = {
      fontColor: '#495057',
      fontStyle: 'bold'
    }
  
    var mode = 'index'
    var intersect = true
  
    var $materieChart = $('#materie-chart')
    // eslint-disable-next-line no-unused-vars
    var materieChart = new Chart($materieChart, {
      type: 'bar',
      data: {
        //labels: ['JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'],
        labels:$materieQuadr,
        datasets: [
          {
            backgroundColor: '#007bff',
            borderColor: '#007bff',
            //data: [1000, 2000, 3000, 2500, 2700, 2500, 3000]
            data : $matPesiQuadr
          },
          {
            backgroundColor: '#ced4da',
            borderColor: '#ced4da',
            //data: [700, 1700, 2700, 2000, 1800, 1500, 2000]
          }
        ]
      },
      options: {
        maintainAspectRatio: false,
        tooltips: {
          mode: mode,
          intersect: intersect
        },
        hover: {
          mode: mode,
          intersect: intersect
        },
        legend: {
          display: true
        },
        scales: {
          yAxes: [{
            // display: false,
            gridLines: {
              display: true,
              lineWidth: '4px',
              color: 'rgba(0, 0, 0, .2)',
              zeroLineColor: 'transparent'
            },
            ticks: $.extend({
              beginAtZero: true,
  
              // Include a dollar sign in the ticks
              callback: function (value) {
                if (value >= 1000) {
                  value /= 1000
                  value += 'k'
                }
  
                return '%' + value
              }
            }, ticksStyle)
          }],
          xAxes: [{
            display: true,
            gridLines: {
              display: true
            },
            ticks: ticksStyle
          }]
        }
      }
    })
  
})

</script>

{% endblock javascripts %}
